.686
.model flat
public _zamien

.code
_zamien PROC ; unsigned int zamien(wchar_t * znaki)
	push ebp
	mov ebp, esp
	push edi

	mov edi, [ebp + 8] ; ci¹g
	mov eax, 0 ; wynik
	mov ecx, 0 ; iterator
	mov ebx, 0

ptl:
	mov edx, 12
	mul edx
	mov bx, [edi + 2 * ecx]
	cmp bx, 39h
	ja inne
	sub bx, 30h
	add eax, ebx
	inc ecx
	cmp [edi + 2 * ecx], word ptr 0
	je koniec
	jmp ptl

inne:
	sub bx, 2180h
	add eax, ebx
	inc ecx
	cmp [edi + 2 * ecx], word ptr 0
	je koniec
	jmp ptl

koniec:
	pop edi
	pop ebp
	ret
_zamien ENDP

END


;==================
#include <iostream>
#include <bitset>
using namespace std;
extern "C" unsigned int zamien(wchar_t * znaki);

int main()
{	
	wchar_t napis[] = { 0x31, 0x32, 0x39, 0x218a, 0x218b, 0 };
	cout << zamien(napis);
	return 0;}